\hypertarget{_sigv4_signing_8h_source}{}\doxysection{Sigv4\+Signing.\+h}
\label{_sigv4_signing_8h_source}\index{/Users/dengket/project/crts/aws-\/crt-\/cpp/include/aws/crt/auth/Sigv4Signing.h@{/Users/dengket/project/crts/aws-\/crt-\/cpp/include/aws/crt/auth/Sigv4Signing.h}}
\mbox{\hyperlink{_sigv4_signing_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_exports_8h}{aws/crt/Exports.h}}>}}
\DoxyCodeLine{8 }
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_date_time_8h}{aws/crt/DateTime.h}}>}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_types_8h}{aws/crt/Types.h}}>}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_signing_8h}{aws/crt/auth/Signing.h}}>}}
\DoxyCodeLine{12 }
\DoxyCodeLine{13 \textcolor{keyword}{struct }aws\_signing\_config\_aws;}
\DoxyCodeLine{14 }
\DoxyCodeLine{15 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_aws}{Aws}}}
\DoxyCodeLine{16 \{}
\DoxyCodeLine{17     \textcolor{keyword}{namespace }Crt}
\DoxyCodeLine{18     \{}
\DoxyCodeLine{19         \textcolor{keyword}{namespace }Auth}
\DoxyCodeLine{20         \{}
\DoxyCodeLine{21             \textcolor{keyword}{class }Credentials;}
\DoxyCodeLine{22             \textcolor{keyword}{class }ICredentialsProvider;}
\DoxyCodeLine{23 }
\DoxyCodeLine{24             \textcolor{keyword}{enum class} \mbox{\hyperlink{namespace_aws_1_1_crt_1_1_auth_a0bb6cb21cf640b39af9e036cfeecdca5}{SigningAlgorithm}}}
\DoxyCodeLine{25             \{}
\DoxyCodeLine{26                 \mbox{\hyperlink{namespace_aws_1_1_crt_1_1_auth_a0bb6cb21cf640b39af9e036cfeecdca5a49dac73a0f86fb857db177b4324a8e71}{SigV4}} = AWS\_SIGNING\_ALGORITHM\_V4,}
\DoxyCodeLine{27                 \mbox{\hyperlink{namespace_aws_1_1_crt_1_1_auth_a0bb6cb21cf640b39af9e036cfeecdca5a34294474e9d0640cc9e43eddaedacff0}{SigV4A}} = AWS\_SIGNING\_ALGORITHM\_V4\_ASYMMETRIC}
\DoxyCodeLine{28             \};}
\DoxyCodeLine{29 }
\DoxyCodeLine{30             \textcolor{keyword}{enum class} \mbox{\hyperlink{namespace_aws_1_1_crt_1_1_auth_ae5eec67d027b78e622d984a5df341a66}{SignatureType}}}
\DoxyCodeLine{31             \{}
\DoxyCodeLine{32                 \mbox{\hyperlink{namespace_aws_1_1_crt_1_1_auth_ae5eec67d027b78e622d984a5df341a66a005f325e8aacc46033d82eab96a23abc}{HttpRequestViaHeaders}} = AWS\_ST\_HTTP\_REQUEST\_HEADERS,}
\DoxyCodeLine{33                 \mbox{\hyperlink{namespace_aws_1_1_crt_1_1_auth_ae5eec67d027b78e622d984a5df341a66a49cd1621053c174a1e837870a0145b68}{HttpRequestViaQueryParams}} = AWS\_ST\_HTTP\_REQUEST\_QUERY\_PARAMS,}
\DoxyCodeLine{34                 \mbox{\hyperlink{namespace_aws_1_1_crt_1_1_auth_ae5eec67d027b78e622d984a5df341a66ac6cce716eaa16c90a4693f80a2c1be98}{HttpRequestChunk}} = AWS\_ST\_HTTP\_REQUEST\_CHUNK,}
\DoxyCodeLine{35                 \mbox{\hyperlink{namespace_aws_1_1_crt_1_1_auth_ae5eec67d027b78e622d984a5df341a66ae684026d77ab12fff8d64337f2311223}{HttpRequestEvent}} = AWS\_ST\_HTTP\_REQUEST\_EVENT,}
\DoxyCodeLine{36             \};}
\DoxyCodeLine{37 }
\DoxyCodeLine{38             \textcolor{keyword}{namespace }SignedBodyValue}
\DoxyCodeLine{39             \{}
\DoxyCodeLine{45                 \mbox{\hyperlink{_exports_8h_a0a3f6c46aee6b588ce99a142cdb22d1d}{AWS\_CRT\_CPP\_API}} \textcolor{keyword}{extern} \textcolor{keyword}{const} \textcolor{keywordtype}{char} *\mbox{\hyperlink{namespace_aws_1_1_crt_1_1_auth_1_1_signed_body_value_abafb6d804bc744ceacb3d6a34e4e37af}{EmptySha256}};}
\DoxyCodeLine{50                 \mbox{\hyperlink{_exports_8h_a0a3f6c46aee6b588ce99a142cdb22d1d}{AWS\_CRT\_CPP\_API}} \textcolor{keyword}{extern} \textcolor{keyword}{const} \textcolor{keywordtype}{char} *\mbox{\hyperlink{namespace_aws_1_1_crt_1_1_auth_1_1_signed_body_value_a5192d49c7d293a41fcb8f40a4cf68d30}{UnsignedPayload}};}
\DoxyCodeLine{55                 \mbox{\hyperlink{_exports_8h_a0a3f6c46aee6b588ce99a142cdb22d1d}{AWS\_CRT\_CPP\_API}} \textcolor{keyword}{extern} \textcolor{keyword}{const} \textcolor{keywordtype}{char} *\mbox{\hyperlink{namespace_aws_1_1_crt_1_1_auth_1_1_signed_body_value_a08de55eeec60178a8589ed94f53b10b9}{StreamingAws4HmacSha256Payload}};}
\DoxyCodeLine{60                 \mbox{\hyperlink{_exports_8h_a0a3f6c46aee6b588ce99a142cdb22d1d}{AWS\_CRT\_CPP\_API}} \textcolor{keyword}{extern} \textcolor{keyword}{const} \textcolor{keywordtype}{char} *\mbox{\hyperlink{namespace_aws_1_1_crt_1_1_auth_1_1_signed_body_value_a0cfb2f407c83fbcd02c2ba7aa2ef2fa7}{StreamingAws4HmacSha256Events}};}
\DoxyCodeLine{61             \} \textcolor{comment}{// namespace SignedBodyValue}}
\DoxyCodeLine{62 }
\DoxyCodeLine{63             \textcolor{keyword}{enum class} \mbox{\hyperlink{namespace_aws_1_1_crt_1_1_auth_a8402cbde3f610cb7d12bf78c81834a2f}{SignedBodyHeaderType}}}
\DoxyCodeLine{64             \{}
\DoxyCodeLine{65                 \mbox{\hyperlink{namespace_aws_1_1_crt_1_1_auth_a8402cbde3f610cb7d12bf78c81834a2fa6adf97f83acf6453d4a6a4b1070f3754}{None}} = AWS\_SBHT\_NONE,}
\DoxyCodeLine{66                 \mbox{\hyperlink{namespace_aws_1_1_crt_1_1_auth_a8402cbde3f610cb7d12bf78c81834a2fad504cfaecd4e3f954736e2711d89b0d2}{XAmzContentSha256}} = AWS\_SBHT\_X\_AMZ\_CONTENT\_SHA256,}
\DoxyCodeLine{67             \};}
\DoxyCodeLine{68 }
\DoxyCodeLine{69             \textcolor{keyword}{using} \mbox{\hyperlink{namespace_aws_1_1_crt_1_1_auth_ae2cea667fd111a653516b658d877922d}{ShouldSignHeaderCb}} = bool (*)(\textcolor{keyword}{const} \mbox{\hyperlink{namespace_aws_1_1_crt_a14ac076b0baa520bccb2b7236e4e78b7}{Crt::ByteCursor}} *, \textcolor{keywordtype}{void} *);}
\DoxyCodeLine{70 }
\DoxyCodeLine{75             \textcolor{keyword}{class }\mbox{\hyperlink{_exports_8h_a0a3f6c46aee6b588ce99a142cdb22d1d}{AWS\_CRT\_CPP\_API}} \mbox{\hyperlink{class_aws_1_1_crt_1_1_auth_1_1_aws_signing_config}{AwsSigningConfig}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_aws_1_1_crt_1_1_auth_1_1_i_signing_config}{ISigningConfig}}}
\DoxyCodeLine{76             \{}
\DoxyCodeLine{77               \textcolor{keyword}{public}:}
\DoxyCodeLine{78                 \mbox{\hyperlink{class_aws_1_1_crt_1_1_auth_1_1_aws_signing_config}{AwsSigningConfig}}(\mbox{\hyperlink{namespace_aws_1_1_crt_a3c9efb213e2de565038afcfd4f8afcda}{Allocator}} *allocator = \mbox{\hyperlink{namespace_aws_1_1_crt_a7178ef65f261a8db52a624458331bbb2}{g\_allocator}});}
\DoxyCodeLine{79                 \textcolor{keyword}{virtual} \mbox{\hyperlink{class_aws_1_1_crt_1_1_auth_1_1_aws_signing_config}{\string~AwsSigningConfig}}();}
\DoxyCodeLine{80 }
\DoxyCodeLine{81                 \textcolor{keyword}{virtual} \mbox{\hyperlink{namespace_aws_1_1_crt_1_1_auth_a1ffa3d1dd5b6b4b4c917b5fff2a00bf1}{SigningConfigType}} \mbox{\hyperlink{class_aws_1_1_crt_1_1_auth_1_1_aws_signing_config_aaf9b0dd90f5a8cb580bd6ad76cab5b72}{GetType}}() const noexcept\textcolor{keyword}{ override }\{ \textcolor{keywordflow}{return} \mbox{\hyperlink{namespace_aws_1_1_crt_1_1_auth_a1ffa3d1dd5b6b4b4c917b5fff2a00bf1acc92a89d16aa4fe64e36cbbd7c0cfaac}{SigningConfigType::Aws}}; \}}
\DoxyCodeLine{82 }
\DoxyCodeLine{86                 \mbox{\hyperlink{namespace_aws_1_1_crt_1_1_auth_a0bb6cb21cf640b39af9e036cfeecdca5}{SigningAlgorithm}} GetSigningAlgorithm() const noexcept;}
\DoxyCodeLine{87 }
\DoxyCodeLine{91                 \textcolor{keywordtype}{void} SetSigningAlgorithm(\mbox{\hyperlink{namespace_aws_1_1_crt_1_1_auth_a0bb6cb21cf640b39af9e036cfeecdca5}{SigningAlgorithm}} algorithm) noexcept;}
\DoxyCodeLine{92 }
\DoxyCodeLine{96                 \mbox{\hyperlink{namespace_aws_1_1_crt_1_1_auth_ae5eec67d027b78e622d984a5df341a66}{SignatureType}} GetSignatureType() const noexcept;}
\DoxyCodeLine{97 }
\DoxyCodeLine{101                 \textcolor{keywordtype}{void} SetSignatureType(\mbox{\hyperlink{namespace_aws_1_1_crt_1_1_auth_ae5eec67d027b78e622d984a5df341a66}{SignatureType}} signatureType) noexcept;}
\DoxyCodeLine{102 }
\DoxyCodeLine{106                 const Crt::\mbox{\hyperlink{namespace_aws_1_1_crt_a865381ab2bc5db45524fa6ce43c394c3}{String}} \&GetRegion() const noexcept;}
\DoxyCodeLine{107 }
\DoxyCodeLine{111                 \textcolor{keywordtype}{void} SetRegion(const Crt::\mbox{\hyperlink{namespace_aws_1_1_crt_a865381ab2bc5db45524fa6ce43c394c3}{String}} \&region) noexcept;}
\DoxyCodeLine{112 }
\DoxyCodeLine{116                 const Crt::\mbox{\hyperlink{namespace_aws_1_1_crt_a865381ab2bc5db45524fa6ce43c394c3}{String}} \&GetService() const noexcept;}
\DoxyCodeLine{117 }
\DoxyCodeLine{121                 \textcolor{keywordtype}{void} SetService(const Crt::\mbox{\hyperlink{namespace_aws_1_1_crt_a865381ab2bc5db45524fa6ce43c394c3}{String}} \&service) noexcept;}
\DoxyCodeLine{122 }
\DoxyCodeLine{126                 \mbox{\hyperlink{class_aws_1_1_crt_1_1_date_time}{DateTime}} GetSigningTimepoint() const noexcept;}
\DoxyCodeLine{127 }
\DoxyCodeLine{131                 \textcolor{keywordtype}{void} SetSigningTimepoint(const \mbox{\hyperlink{class_aws_1_1_crt_1_1_date_time}{DateTime}} \&date) noexcept;}
\DoxyCodeLine{132 }
\DoxyCodeLine{133                 \textcolor{comment}{/*}}
\DoxyCodeLine{134 \textcolor{comment}{                 * We assume the uri will be encoded once in preparation for transmission.  Certain services}}
\DoxyCodeLine{135 \textcolor{comment}{                 * do not decode before checking signature, requiring us to actually double-\/encode the uri in the}}
\DoxyCodeLine{136 \textcolor{comment}{                 * canonical request in order to pass a signature check.}}
\DoxyCodeLine{137 \textcolor{comment}{                 */}}
\DoxyCodeLine{138 }
\DoxyCodeLine{143                 \textcolor{keywordtype}{bool} GetUseDoubleUriEncode() const noexcept;}
\DoxyCodeLine{144 }
\DoxyCodeLine{149                 \textcolor{keywordtype}{void} SetUseDoubleUriEncode(\textcolor{keywordtype}{bool} useDoubleUriEncode) noexcept;}
\DoxyCodeLine{150 }
\DoxyCodeLine{154                 \textcolor{keywordtype}{bool} GetShouldNormalizeUriPath() const noexcept;}
\DoxyCodeLine{155 }
\DoxyCodeLine{159                 \textcolor{keywordtype}{void} SetShouldNormalizeUriPath(\textcolor{keywordtype}{bool} shouldNormalizeUriPath) noexcept;}
\DoxyCodeLine{160 }
\DoxyCodeLine{165                 \textcolor{keywordtype}{bool} GetOmitSessionToken() const noexcept;}
\DoxyCodeLine{166 }
\DoxyCodeLine{171                 \textcolor{keywordtype}{void} SetOmitSessionToken(\textcolor{keywordtype}{bool} omitSessionToken) noexcept;}
\DoxyCodeLine{172 }
\DoxyCodeLine{176                 \mbox{\hyperlink{namespace_aws_1_1_crt_1_1_auth_ae2cea667fd111a653516b658d877922d}{ShouldSignHeaderCb}} GetShouldSignHeaderCallback() const noexcept;}
\DoxyCodeLine{177 }
\DoxyCodeLine{182                 \textcolor{keywordtype}{void} SetShouldSignHeaderCallback(\mbox{\hyperlink{namespace_aws_1_1_crt_1_1_auth_ae2cea667fd111a653516b658d877922d}{ShouldSignHeaderCb}} shouldSignHeaderCb) noexcept;}
\DoxyCodeLine{183 }
\DoxyCodeLine{187                 \textcolor{keywordtype}{void} *GetShouldSignHeaderUserData() const noexcept;}
\DoxyCodeLine{188 }
\DoxyCodeLine{192                 \textcolor{keywordtype}{void} SetShouldSignHeaderUserData(\textcolor{keywordtype}{void} *userData) noexcept;}
\DoxyCodeLine{193 }
\DoxyCodeLine{198                 const Crt::\mbox{\hyperlink{namespace_aws_1_1_crt_a865381ab2bc5db45524fa6ce43c394c3}{String}} \&GetSignedBodyValue() const noexcept;}
\DoxyCodeLine{199 }
\DoxyCodeLine{207                 \textcolor{keywordtype}{void} SetSignedBodyValue(const Crt::\mbox{\hyperlink{namespace_aws_1_1_crt_a865381ab2bc5db45524fa6ce43c394c3}{String}} \&signedBodyValue) noexcept;}
\DoxyCodeLine{208 }
\DoxyCodeLine{212                 \mbox{\hyperlink{namespace_aws_1_1_crt_1_1_auth_a8402cbde3f610cb7d12bf78c81834a2f}{SignedBodyHeaderType}} GetSignedBodyHeader() const noexcept;}
\DoxyCodeLine{213 }
\DoxyCodeLine{217                 \textcolor{keywordtype}{void} SetSignedBodyHeader(\mbox{\hyperlink{namespace_aws_1_1_crt_1_1_auth_a8402cbde3f610cb7d12bf78c81834a2f}{SignedBodyHeaderType}} signedBodyHeader) noexcept;}
\DoxyCodeLine{218 }
\DoxyCodeLine{222                 uint64\_t GetExpirationInSeconds() const noexcept;}
\DoxyCodeLine{223 }
\DoxyCodeLine{227                 \textcolor{keywordtype}{void} SetExpirationInSeconds(uint64\_t expirationInSeconds) noexcept;}
\DoxyCodeLine{228 }
\DoxyCodeLine{229                 \textcolor{comment}{/*}}
\DoxyCodeLine{230 \textcolor{comment}{                 * For Sigv4 signing, either the credentials provider or the credentials must be set.}}
\DoxyCodeLine{231 \textcolor{comment}{                 * Credentials, if set, takes precedence over the provider.}}
\DoxyCodeLine{232 \textcolor{comment}{                 */}}
\DoxyCodeLine{233 }
\DoxyCodeLine{237                 const \mbox{\hyperlink{namespacestd}{std}}::shared\_ptr<\mbox{\hyperlink{class_aws_1_1_crt_1_1_auth_1_1_i_credentials_provider}{ICredentialsProvider}}> \&GetCredentialsProvider() const noexcept;}
\DoxyCodeLine{238 }
\DoxyCodeLine{242                 \textcolor{keywordtype}{void} SetCredentialsProvider(const \mbox{\hyperlink{namespacestd}{std}}::shared\_ptr<\mbox{\hyperlink{class_aws_1_1_crt_1_1_auth_1_1_i_credentials_provider}{ICredentialsProvider}}> \&credsProvider) noexcept;}
\DoxyCodeLine{243 }
\DoxyCodeLine{247                 const \mbox{\hyperlink{namespacestd}{std}}::shared\_ptr<\mbox{\hyperlink{class_aws_1_1_crt_1_1_auth_1_1_credentials}{Credentials}}> \&GetCredentials() const noexcept;}
\DoxyCodeLine{248 }
\DoxyCodeLine{252                 \textcolor{keywordtype}{void} SetCredentials(const \mbox{\hyperlink{namespacestd}{std}}::shared\_ptr<\mbox{\hyperlink{class_aws_1_1_crt_1_1_auth_1_1_credentials}{Credentials}}> \&credentials) noexcept;}
\DoxyCodeLine{253 }
\DoxyCodeLine{255                 const struct aws\_signing\_config\_aws *GetUnderlyingHandle() const noexcept;}
\DoxyCodeLine{256 }
\DoxyCodeLine{257               private:}
\DoxyCodeLine{258                 \mbox{\hyperlink{namespace_aws_1_1_crt_a3c9efb213e2de565038afcfd4f8afcda}{Allocator}} *m\_allocator;}
\DoxyCodeLine{259                 \mbox{\hyperlink{namespacestd}{std}}::shared\_ptr<\mbox{\hyperlink{class_aws_1_1_crt_1_1_auth_1_1_i_credentials_provider}{ICredentialsProvider}}> m\_credentialsProvider;}
\DoxyCodeLine{260                 \mbox{\hyperlink{namespacestd}{std}}::shared\_ptr<\mbox{\hyperlink{class_aws_1_1_crt_1_1_auth_1_1_credentials}{Credentials}}> m\_credentials;}
\DoxyCodeLine{261                 struct aws\_signing\_config\_aws m\_config;}
\DoxyCodeLine{262                 Crt::\mbox{\hyperlink{namespace_aws_1_1_crt_a865381ab2bc5db45524fa6ce43c394c3}{String}} m\_signingRegion;}
\DoxyCodeLine{263                 Crt::\mbox{\hyperlink{namespace_aws_1_1_crt_a865381ab2bc5db45524fa6ce43c394c3}{String}} m\_serviceName;}
\DoxyCodeLine{264                 Crt::\mbox{\hyperlink{namespace_aws_1_1_crt_a865381ab2bc5db45524fa6ce43c394c3}{String}} m\_signedBodyValue;}
\DoxyCodeLine{265             \};}
\DoxyCodeLine{266 }
\DoxyCodeLine{270             class \mbox{\hyperlink{_exports_8h_a0a3f6c46aee6b588ce99a142cdb22d1d}{AWS\_CRT\_CPP\_API}} \mbox{\hyperlink{class_aws_1_1_crt_1_1_auth_1_1_sigv4_http_request_signer}{Sigv4HttpRequestSigner}} : public \mbox{\hyperlink{class_aws_1_1_crt_1_1_auth_1_1_i_http_request_signer}{IHttpRequestSigner}}}
\DoxyCodeLine{271             \{}
\DoxyCodeLine{272               \textcolor{keyword}{public}:}
\DoxyCodeLine{273                 \mbox{\hyperlink{class_aws_1_1_crt_1_1_auth_1_1_sigv4_http_request_signer}{Sigv4HttpRequestSigner}}(\mbox{\hyperlink{namespace_aws_1_1_crt_a3c9efb213e2de565038afcfd4f8afcda}{Allocator}} *allocator = \mbox{\hyperlink{namespace_aws_1_1_crt_a7178ef65f261a8db52a624458331bbb2}{g\_allocator}});}
\DoxyCodeLine{274                 \textcolor{keyword}{virtual} \mbox{\hyperlink{class_aws_1_1_crt_1_1_auth_1_1_sigv4_http_request_signer_afa436c35e981ac6ef75cc8820cc24ffe}{\string~Sigv4HttpRequestSigner}}() = \textcolor{keywordflow}{default};}
\DoxyCodeLine{275 }
\DoxyCodeLine{276                 \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_aws_1_1_crt_1_1_auth_1_1_sigv4_http_request_signer_aa7611bb9aad70da12e29b9fac88a5740}{IsValid}}()\textcolor{keyword}{ const override }\{ \textcolor{keywordflow}{return} \textcolor{keyword}{true}; \}}
\DoxyCodeLine{280                 \textcolor{keyword}{virtual} \textcolor{keywordtype}{bool} SignRequest(}
\DoxyCodeLine{281                     \textcolor{keyword}{const} std::shared\_ptr<Aws::Crt::Http::HttpRequest> \&request,}
\DoxyCodeLine{282                     \textcolor{keyword}{const} \mbox{\hyperlink{class_aws_1_1_crt_1_1_auth_1_1_i_signing_config}{ISigningConfig}} \&config,}
\DoxyCodeLine{283                     \textcolor{keyword}{const} \mbox{\hyperlink{namespace_aws_1_1_crt_1_1_auth_ab4ca80a8fc66d38af49bf5431b5c8ebf}{OnHttpRequestSigningComplete}} \&completionCallback) \textcolor{keyword}{override};}
\DoxyCodeLine{284 }
\DoxyCodeLine{285               \textcolor{keyword}{private}:}
\DoxyCodeLine{286                 \mbox{\hyperlink{namespace_aws_1_1_crt_a3c9efb213e2de565038afcfd4f8afcda}{Allocator}} *m\_allocator;}
\DoxyCodeLine{287             \};}
\DoxyCodeLine{288         \} \textcolor{comment}{// namespace Auth}}
\DoxyCodeLine{289     \}     \textcolor{comment}{// namespace Crt}}
\DoxyCodeLine{290 \} \textcolor{comment}{// namespace Aws}}

\end{DoxyCode}
