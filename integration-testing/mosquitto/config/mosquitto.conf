# ======================================================
# Per-listener settings
# ======================================================
per_listener_settings true

# ======================================================
# 1️⃣ Plain MQTT (no TLS)
# ======================================================
listener 1883 0.0.0.0
protocol mqtt
allow_anonymous true
persistence true

# ======================================================
# 2️⃣ MQTT over TLS
# ======================================================
listener 8883 0.0.0.0
protocol mqtt
allow_anonymous true
require_certificate false
cafile /etc/mosquitto/certs/ca_certificate.pem
certfile /etc/mosquitto/certs/server.crt
keyfile /etc/mosquitto/certs/server.key

# ======================================================
# 3️⃣ MQTT over WebSockets (no TLS)
# ======================================================
listener 8080 0.0.0.0
protocol websockets
allow_anonymous true

# ======================================================
# 4️⃣ MQTT over WebSockets + TLS
# ======================================================
listener 8081 0.0.0.0
protocol websockets
allow_anonymous true
require_certificate false
cafile /etc/mosquitto/certs/ca_certificate.pem
certfile /etc/mosquitto/certs/server.crt
keyfile /etc/mosquitto/certs/server.key

# ======================================================
# Logging and Persistence
# ======================================================
persistence true
log_type error
log_type warning
log_type notice
log_type information
